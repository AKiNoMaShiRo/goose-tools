"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("vue");function S(d,u){const r=d;return r.install=t=>{t.component(r.name,d)},r}const y={class:"sign-board-box"},x=["width","height"],k=n.defineComponent({__name:"index",props:{width:{type:Number,default:500},height:{type:Number,default:200},unit:{type:String,default:"px"},color:{type:String,default:"black"},backgroundcolor:{type:String,default:"transparent"},lineWidth:{type:Number,default:2}},setup(d,{expose:u}){const r=d,t=n.ref(null);let o=null,s=[],a=-1,i={x:null,y:null};function m(e){(Math.abs(e.offsetX-i.x)>=1||Math.abs(e.offsetY-i.y)>=1)&&(o.strokeStyle=r.color,o.lineWidth=r.lineWidth,o.lineJoin="round",o.beginPath(),o.moveTo(i.x,i.y),i.x=e.offsetX,i.y=e.offsetY,o.lineTo(i.x,i.y),s[a].push({x:e.offsetX,y:e.offsetY}),o.stroke())}n.onMounted(()=>{o=t.value.getContext("2d"),o.fillStyle=r.backgroundcolor,o.fillRect(0,0,r.width,r.height),t.value.addEventListener("pointerdown",function(e){i.x=e.offsetX,i.y=e.offsetY,a<s.length-1&&s.splice(a+1),s.push([]),a=s.length-1,s[a].push({x:e.offsetX,y:e.offsetY}),t.value.addEventListener("pointermove",m)}),t.value.addEventListener("pointerup",function(){t.value.removeEventListener("pointermove",m)})});function l(){s=[],a=-1,o.clearRect(0,0,r.width,r.height),console.log("component clear",r.width,r.height)}function p(){if(a>=0){o.clearRect(0,0,r.width,r.height),o.strokeStyle=r.color,o.lineWidth=r.lineWidth,o.lineJoin="round";for(let e=0;e<a;e++)for(let c=0;c<s[e].length-1;c++)o.beginPath(),o.moveTo(s[e][c].x,s[e][c].y),o.lineTo(s[e][c+1].x,s[e][c+1].y),o.stroke();a-=1}}function v(){if(a<s.length-1){a++;for(let e=0;e<s[a].length-1;e++)o.beginPath(),o.moveTo(s[a][e].x,s[a][e].y),o.lineTo(s[a][e+1].x,s[a][e+1].y),o.stroke()}}function g(){let e=document.createElement("a");e.href=t.value.toDataURL(),e.download="sign.png",e.click(),document.removeChild(e)}return u({clear:l,back:p,restore:v,download:g}),(e,c)=>(n.openBlock(),n.createElementBlock("div",y,[n.createElementVNode("canvas",{ref_key:"deSignBoard",ref:t,width:d.width+d.unit,height:d.height+d.unit},null,8,x)]))}}),b=n.defineComponent({__name:"index",props:{options:{type:Object},scrollData:{type:Array,require:!0}},setup(d){const u=d,r={speed:.4,wheelSpeed:5,direction:"up",scrollNum:5,isStop:!0},t=n.computed(()=>Object.assign(r,u.options)),o=n.ref(null),s=n.ref(null),a=n.ref(null),i=n.ref(),m={up:[0,0],down:[0,-100],left:[0,0],right:[-100,0]},l=n.reactive(m[t.value.direction]);function p(){i.value&&(cancelAnimationFrame(i.value),i.value=null)}function v(){p(),t.value.direction==="up"?l[1]>-100?l[1]-=t.value.speed:l[1]=0:t.value.direction==="down"?l[1]<0?l[1]+=t.value.speed:l[1]=-100:t.value.direction==="left"?l[0]>-100?l[0]-=t.value.speed:l[0]=0:t.value.direction==="right"&&(l[0]<0?l[0]+=t.value.speed:l[0]=-100),s.value.style.transform=`translateX(${l[0]}%) translateY(${l[1]}%)`,a.value.style.transform=`translateX(${l[0]}%) translateY(${l[1]}%)`,i.value=requestAnimationFrame(v)}function g(){p()}function e(){u.scrollData.length>=t.value.scrollNum&&g()}function c(){u.scrollData.length>=t.value.scrollNum&&(i.value=requestAnimationFrame(v))}return n.onMounted(()=>{u.scrollData.length>=t.value.scrollNum&&(i.value=requestAnimationFrame(v),t.value.isStop&&o.value.addEventListener("wheel",h=>{if(t.value.direction==="up"||t.value.direction==="down")if(h.deltaY<0){let f=l[1]+t.value.wheelSpeed;l[1]=f>0?-100:f}else{let f=l[1]-t.value.wheelSpeed;l[1]=f<-100?0:f}else if(t.value.direction==="left"||t.value.direction==="right")if(h.deltaY<0){let f=l[0]+t.value.wheelSpeed;l[0]=f>0?0:f}else{let f=l[0]-t.value.wheelSpeed;l[0]=f<-100?-100:f}s.value.style.transform=`translateX(${l[0]}%) translateY(${l[1]}%)`,a.value.style.transform=`translateX(${l[0]}%) translateY(${l[1]}%)`}))}),(h,f)=>(n.openBlock(),n.createElementBlock("div",{ref_key:"deSeamlessScrollBox",ref:o,class:n.normalizeClass(["seamless-scroll-box",{flex:n.unref(t).direction==="left"||n.unref(t).direction==="right"}]),onMouseenter:e,onMouseleave:c},[n.createElementVNode("section",{ref_key:"listA",ref:s,class:"seamless-scroll-list"},[n.renderSlot(h.$slots,"default")],512),n.createElementVNode("section",{ref_key:"listB",ref:a,class:"seamless-scroll-list"},[n.renderSlot(h.$slots,"default")],512)],34))}}),w={__name:"index",props:{dataList:{type:Array},scrollSpeed:{type:Number,default:.1},amount:{type:Number,default:10},hoverStop:{type:Boolean,default:!0},scrollRate:{type:Number,default:10}},setup(d){const u=d;let r=n.ref(null),t=n.ref(null),o=n.ref([]),s,a=10,i=0,m;n.onMounted(()=>{a=u.amount,console.log(a),s=t.value.getBoundingClientRect().height,r.value.style.transform="translateY(0)",o.value=u.dataList.slice(0,a),n.nextTick(()=>{e=r.value.children[0].getBoundingClientRect().height,console.log(e),m=requestAnimationFrame(c),u.hoverStop&&r.value.addEventListener("wheel",h=>{i+=h.deltaY>0?u.scrollSpeed*u.scrollRate:-u.scrollSpeed*u.scrollRate,i>=s&&(i=s),i<0&&(i=0),r.value.style.transform=`translateY(${-1*i}px)`})})});function l(){m&&(cancelAnimationFrame(m),m=void 0)}function p(){u.hoverStop&&l()}function v(){u.hoverStop&&c()}function g(h){console.log(h)}let e=0;function c(){l(),i+=u.scrollSpeed,i>=e&&(i-=e,o.value.push(u.dataList[a++]),a>=u.dataList.length&&(a=0),e=r.value.children[1].getBoundingClientRect().height,o.value.shift()),r.value.style.transform=`translateY(${-1*i}px)`,m=requestAnimationFrame(c)}return(h,f)=>(n.openBlock(),n.createElementBlock("section",{ref_key:"virtualInfiniteScrollBox",ref:t,class:"virtual-infinite-scroll-box"},[n.createElementVNode("div",{ref_key:"virtualInfiniteScrollList",ref:r,onMouseenter:p,onMouseleave:v,onScroll:g},[n.renderSlot(h.$slots,"default",{slotItem:n.unref(o)})],544)],512))}},B=S(k),E=S(b),L=S(w);exports.SeamlessScroll=E;exports.SignBoard=B;exports.VirtualInfiniteScroll=L;
