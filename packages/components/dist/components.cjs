"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue");function B(v,d){const t=v;return t.install=o=>{o.component(t.name,v)},t}const k={class:"sign-board-box"},L=["width","height"],W=e.defineComponent({__name:"index",props:{width:{type:Number,default:500},height:{type:Number,default:200},unit:{type:String,default:"px"},color:{type:String,default:"black"},backgroundcolor:{type:String,default:"transparent"},lineWidth:{type:Number,default:2}},setup(v,{expose:d}){const t=v,o=e.ref(null);let n=null,a=[],c=-1,s={x:null,y:null};function p(l){(Math.abs(l.offsetX-s.x)>=1||Math.abs(l.offsetY-s.y)>=1)&&(n.strokeStyle=t.color,n.lineWidth=t.lineWidth,n.lineJoin="round",n.beginPath(),n.moveTo(s.x,s.y),s.x=l.offsetX,s.y=l.offsetY,n.lineTo(s.x,s.y),a[c].push({x:l.offsetX,y:l.offsetY}),n.stroke())}e.onMounted(()=>{n=o.value.getContext("2d"),n.fillStyle=t.backgroundcolor,n.fillRect(0,0,t.width,t.height),o.value.addEventListener("pointerdown",function(l){s.x=l.offsetX,s.y=l.offsetY,c<a.length-1&&a.splice(c+1),a.push([]),c=a.length-1,a[c].push({x:l.offsetX,y:l.offsetY}),o.value.addEventListener("pointermove",p)}),o.value.addEventListener("pointerup",function(){o.value.removeEventListener("pointermove",p)})});function i(){a=[],c=-1,n.clearRect(0,0,t.width,t.height),console.log("component clear",t.width,t.height)}function x(){if(c>=0){n.clearRect(0,0,t.width,t.height),n.strokeStyle=t.color,n.lineWidth=t.lineWidth,n.lineJoin="round";for(let l=0;l<c;l++)for(let g=0;g<a[l].length-1;g++)n.beginPath(),n.moveTo(a[l][g].x,a[l][g].y),n.lineTo(a[l][g+1].x,a[l][g+1].y),n.stroke();c-=1}}function w(){if(c<a.length-1){c++;for(let l=0;l<a[c].length-1;l++)n.beginPath(),n.moveTo(a[c][l].x,a[c][l].y),n.lineTo(a[c][l+1].x,a[c][l+1].y),n.stroke()}}function b(){let l=document.createElement("a");l.href=o.value.toDataURL(),l.download="sign.png",l.click(),document.removeChild(l)}return d({clear:i,back:x,restore:w,download:b}),(l,g)=>(e.openBlock(),e.createElementBlock("div",k,[e.createElementVNode("canvas",{ref_key:"deSignBoard",ref:o,width:v.width+v.unit,height:v.height+v.unit},null,8,L)]))}}),_=e.defineComponent({__name:"index",props:{options:{type:Object},scrollData:{type:Array,require:!0}},setup(v){const d=v,t={speed:.4,wheelSpeed:5,direction:"up",scrollNum:5,isStop:!0},o=e.computed(()=>Object.assign(t,d.options)),n=e.ref(null),a=e.ref(null),c=e.ref(null),s=e.ref(),p={up:[0,0],down:[0,-100],left:[0,0],right:[-100,0]},i=e.reactive(p[o.value.direction]);function x(){s.value&&(cancelAnimationFrame(s.value),s.value=null)}function w(){x(),o.value.direction==="up"?i[1]>-100?i[1]-=o.value.speed:i[1]=0:o.value.direction==="down"?i[1]<0?i[1]+=o.value.speed:i[1]=-100:o.value.direction==="left"?i[0]>-100?i[0]-=o.value.speed:i[0]=0:o.value.direction==="right"&&(i[0]<0?i[0]+=o.value.speed:i[0]=-100),a.value.style.transform=`translateX(${i[0]}%) translateY(${i[1]}%)`,c.value.style.transform=`translateX(${i[0]}%) translateY(${i[1]}%)`,s.value=requestAnimationFrame(w)}function b(){x()}function l(){d.scrollData.length>=o.value.scrollNum&&b()}function g(){d.scrollData.length>=o.value.scrollNum&&(s.value=requestAnimationFrame(w))}return e.onMounted(()=>{d.scrollData.length>=o.value.scrollNum&&(s.value=requestAnimationFrame(w),o.value.isStop&&n.value.addEventListener("wheel",y=>{if(o.value.direction==="up"||o.value.direction==="down")if(y.deltaY<0){let u=i[1]+o.value.wheelSpeed;i[1]=u>0?-100:u}else{let u=i[1]-o.value.wheelSpeed;i[1]=u<-100?0:u}else if(o.value.direction==="left"||o.value.direction==="right")if(y.deltaY<0){let u=i[0]+o.value.wheelSpeed;i[0]=u>0?0:u}else{let u=i[0]-o.value.wheelSpeed;i[0]=u<-100?-100:u}a.value.style.transform=`translateX(${i[0]}%) translateY(${i[1]}%)`,c.value.style.transform=`translateX(${i[0]}%) translateY(${i[1]}%)`}))}),(y,u)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"deSeamlessScrollBox",ref:n,class:e.normalizeClass(["seamless-scroll-box",{flex:e.unref(o).direction==="left"||e.unref(o).direction==="right"}]),onMouseenter:l,onMouseleave:g},[e.createElementVNode("section",{ref_key:"listA",ref:a,class:"seamless-scroll-list"},[e.renderSlot(y.$slots,"default")],512),e.createElementVNode("section",{ref_key:"listB",ref:c,class:"seamless-scroll-list"},[e.renderSlot(y.$slots,"default")],512)],34))}}),$={__name:"index",props:{dataList:{type:Array},scrollSpeed:{type:Number,default:.1},amount:{type:Number,default:10},hoverStop:{type:Boolean,default:!0},scrollRate:{type:Number,default:10}},setup(v){const d=v;let t=e.ref(null),o=e.ref(null),n=e.ref([]),a,c=10,s=0,p;e.onMounted(()=>{c=d.amount,console.log(c),a=o.value.getBoundingClientRect().height,t.value.style.transform="translateY(0)",n.value=d.dataList.slice(0,c),e.nextTick(()=>{l=t.value.children[0].getBoundingClientRect().height,console.log(l),p=requestAnimationFrame(g),d.hoverStop&&t.value.addEventListener("wheel",y=>{s+=y.deltaY>0?d.scrollSpeed*d.scrollRate:-d.scrollSpeed*d.scrollRate,s>=a&&(s=a),s<0&&(s=0),t.value.style.transform=`translateY(${-1*s}px)`})})});function i(){p&&(cancelAnimationFrame(p),p=void 0)}function x(){d.hoverStop&&i()}function w(){d.hoverStop&&g()}function b(y){console.log(y)}let l=0;function g(){i(),s+=d.scrollSpeed,s>=l&&(s-=l,n.value.push(d.dataList[c++]),c>=d.dataList.length&&(c=0),l=t.value.children[1].getBoundingClientRect().height,n.value.shift()),t.value.style.transform=`translateY(${-1*s}px)`,p=requestAnimationFrame(g)}return(y,u)=>(e.openBlock(),e.createElementBlock("section",{ref_key:"virtualInfiniteScrollBox",ref:o,class:"virtual-infinite-scroll-box"},[e.createElementVNode("div",{ref_key:"virtualInfiniteScrollList",ref:t,onMouseenter:x,onMouseleave:w,onScroll:b},[e.renderSlot(y.$slots,"default",{slotItem:e.unref(n)})],544)],512))}},I=["id"],N={class:"goose-water-fall-loading"},A=e.defineComponent({__name:"index",props:{options:{}},emits:["addData","onloaded"],setup(v,{emit:d}){const t=v;let o=0,n=e.ref([]),a=e.ref([]),c=e.computed(()=>Math.max(...a.value)),s=e.ref(!0),p={},i;const x=d;function w(){var m;o=((((m=document.getElementById("gooseWaterFallContainer"))==null?void 0:m.clientWidth)||0)-t.options.gap*(t.options.column-1))/t.options.column,n.value=[];for(let f=0;f<t.options.data.length;f++)n.value.push({x:0,y:0});a.value=new Array(t.options.column).fill(0),t.options.data.forEach(f=>{f.width=o,f.imgWidth||(f.imgWidth=o)})}function b(u,m){let f=[];t.options.data.forEach((r,h)=>{r.imgHeight||f.push(l(r.imgUrl,r.imgWidth).then(S=>{r.imgHeight=Number(S)}))}),Promise.all(f).then(()=>{s.value=!1,e.nextTick(()=>{t.options.data.forEach((r,h)=>{let S=document.getElementById("gooseWaterFallItem"+h);S&&!r.height&&(r.height=S.clientHeight)}),g(u,m)})})}function l(u,m){return new Promise((f,r)=>{let h=new Image;h.src=u,h.onload=function(){let S=m*h.height/h.width;f(S)},h.onerror=function(){r(new Error("Image load error, url:"+u))}})}function g(u,m){let f=t.options.itemBottomGap||0;for(let r=u;r<m;r++){let h=t.options.data[r];if(r<t.options.column)a.value[r]+=h.height+f,n.value[r].y=0,n.value[r].x=(h.width+t.options.gap)*r;else{let S=Math.min(...a.value),E=a.value.indexOf(S);n.value[r].y=S,n.value[r].x=(h.width+t.options.gap)*E,a.value[E]+=h.height+f}}t.options.bottomLoading&&y(),x("onloaded")}function y(){var u;p=new IntersectionObserver(m=>{m[0].isIntersecting&&x("addData")},{root:(u=document.getElementById("gooseWaterFallContainer"))==null?void 0:u.parentElement,rootMargin:(t.options.loadDistance||0)+"px"}),i&&p.observe(i)}return t.options.bottomLoading&&e.watch(()=>t.options.data.length,(u,m)=>{let f=u-m;if(f>0){for(let r=0;r<f;r++)n.value.push({x:0,y:0});for(let r=m;r<u;r++)t.options.data[r].width=o,t.options.data[r].imgWidth||(t.options.data[r].imgWidth=o);b(m,u)}}),e.onMounted(()=>{w(),b(0,t.options.data.length),i=document.getElementById("gooseWaterFallLoadMore")}),e.onBeforeUnmount(()=>{t.options.bottomLoading&&p&&i&&p.unobserve(i)}),(u,m)=>(e.openBlock(),e.createElementBlock("section",{id:"gooseWaterFallContainer",class:"goose-water-fall-container",style:e.normalizeStyle({height:e.unref(c)+"px"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.options.data,(f,r)=>{var h,S;return e.openBlock(),e.createElementBlock("div",{class:"goose-water-fall-item",id:"gooseWaterFallItem"+r,style:e.normalizeStyle({width:f.width+"px",transform:`translate(${Number((h=e.unref(n)[r])==null?void 0:h.x)}px, ${Number((S=e.unref(n)[r])==null?void 0:S.y)}px)`})},[e.renderSlot(u.$slots,"default",{item:f})],12,I)}),256)),e.createElementVNode("div",{id:"gooseWaterFallLoadMore",class:"goose-water-fall-load-more",style:e.normalizeStyle({left:"0px",top:`${Math.max(...e.unref(a))}px`})},null,4),e.withDirectives(e.createElementVNode("div",N,[e.renderSlot(u.$slots,"loading",{},()=>[m[0]||(m[0]=e.createElementVNode("div",{style:{"text-align":"center"}},"加载中...",-1))])],512),[[e.vShow,e.unref(s)]])],4))}}),M=B(W),F=B(_),Y=B($),C=B(A);exports.SeamlessScroll=F;exports.SignBoard=M;exports.VirtualInfiniteScroll=Y;exports.WaterFall=C;
