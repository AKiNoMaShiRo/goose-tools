"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue");function E(S,c){const u=S;return u.install=t=>{t.component(u.name,S)},u}const I={class:"sign-board-box"},$=["width","height"],N=e.defineComponent({__name:"index",props:{width:{type:Number,default:500},height:{type:Number,default:200},unit:{type:String,default:"px"},color:{type:String,default:"black"},backgroundcolor:{type:String,default:"transparent"},lineWidth:{type:Number,default:2}},setup(S,{expose:c}){const u=S,t=e.ref(null);let n=null,i=[],a=-1,s={x:null,y:null};function p(o){(Math.abs(o.offsetX-s.x)>=1||Math.abs(o.offsetY-s.y)>=1)&&(n.strokeStyle=u.color,n.lineWidth=u.lineWidth,n.lineJoin="round",n.beginPath(),n.moveTo(s.x,s.y),s.x=o.offsetX,s.y=o.offsetY,n.lineTo(s.x,s.y),i[a].push({x:o.offsetX,y:o.offsetY}),n.stroke())}e.onMounted(()=>{n=t.value.getContext("2d"),n.fillStyle=u.backgroundcolor,n.fillRect(0,0,u.width,u.height),t.value.addEventListener("pointerdown",function(o){s.x=o.offsetX,s.y=o.offsetY,a<i.length-1&&i.splice(a+1),i.push([]),a=i.length-1,i[a].push({x:o.offsetX,y:o.offsetY}),t.value.addEventListener("pointermove",p)}),t.value.addEventListener("pointerup",function(){t.value.removeEventListener("pointermove",p)})});function l(){i=[],a=-1,n.clearRect(0,0,u.width,u.height),console.log("component clear",u.width,u.height)}function x(){if(a>=0){n.clearRect(0,0,u.width,u.height),n.strokeStyle=u.color,n.lineWidth=u.lineWidth,n.lineJoin="round";for(let o=0;o<a;o++)for(let g=0;g<i[o].length-1;g++)n.beginPath(),n.moveTo(i[o][g].x,i[o][g].y),n.lineTo(i[o][g+1].x,i[o][g+1].y),n.stroke();a-=1}}function b(){if(a<i.length-1){a++;for(let o=0;o<i[a].length-1;o++)n.beginPath(),n.moveTo(i[a][o].x,i[a][o].y),n.lineTo(i[a][o+1].x,i[a][o+1].y),n.stroke()}}function B(){let o=document.createElement("a");o.href=t.value.toDataURL(),o.download="sign.png",o.click(),document.removeChild(o)}return c({clear:l,back:x,restore:b,download:B}),(o,g)=>(e.openBlock(),e.createElementBlock("div",I,[e.createElementVNode("canvas",{ref_key:"deSignBoard",ref:t,width:S.width+S.unit,height:S.height+S.unit},null,8,$)]))}}),_=e.defineComponent({__name:"index",props:{options:{type:Object},scrollData:{type:Array,require:!0}},setup(S){const c=S,u={speed:.4,wheelSpeed:5,direction:"up",scrollNum:5,isStop:!0},t=e.computed(()=>Object.assign(u,c.options)),n=e.ref(null),i=e.ref(null),a=e.ref(null),s=e.ref(),p={up:[0,0],down:[0,-100],left:[0,0],right:[-100,0]},l=e.reactive(p[t.value.direction]);function x(){s.value&&(cancelAnimationFrame(s.value),s.value=null)}function b(){x(),t.value.direction==="up"?l[1]>-100?l[1]-=t.value.speed:l[1]=0:t.value.direction==="down"?l[1]<0?l[1]+=t.value.speed:l[1]=-100:t.value.direction==="left"?l[0]>-100?l[0]-=t.value.speed:l[0]=0:t.value.direction==="right"&&(l[0]<0?l[0]+=t.value.speed:l[0]=-100),i.value.style.transform=`translateX(${l[0]}%) translateY(${l[1]}%)`,a.value.style.transform=`translateX(${l[0]}%) translateY(${l[1]}%)`,s.value=requestAnimationFrame(b)}function B(){x()}function o(){c.scrollData.length>=t.value.scrollNum&&B()}function g(){c.scrollData.length>=t.value.scrollNum&&(s.value=requestAnimationFrame(b))}return e.onMounted(()=>{c.scrollData.length>=t.value.scrollNum&&(s.value=requestAnimationFrame(b),t.value.isStop&&n.value.addEventListener("wheel",v=>{if(v.preventDefault(),t.value.direction==="up"||t.value.direction==="down")if(v.deltaY<0){let y=l[1]+t.value.wheelSpeed;l[1]=y>0?-100:y}else{let y=l[1]-t.value.wheelSpeed;l[1]=y<-100?0:y}else if(t.value.direction==="left"||t.value.direction==="right")if(v.deltaY<0){let y=l[0]+t.value.wheelSpeed;l[0]=y>0?0:y}else{let y=l[0]-t.value.wheelSpeed;l[0]=y<-100?-100:y}i.value.style.transform=`translateX(${l[0]}%) translateY(${l[1]}%)`,a.value.style.transform=`translateX(${l[0]}%) translateY(${l[1]}%)`}))}),(v,y)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"deSeamlessScrollBox",ref:n,class:e.normalizeClass(["seamless-scroll-box",{flex:e.unref(t).direction==="left"||e.unref(t).direction==="right"}]),onMouseenter:o,onMouseleave:g},[e.createElementVNode("section",{ref_key:"listA",ref:i,class:"seamless-scroll-list"},[e.renderSlot(v.$slots,"default")],512),e.createElementVNode("section",{ref_key:"listB",ref:a,class:"seamless-scroll-list"},[e.renderSlot(v.$slots,"default")],512)],34))}}),M={__name:"index",props:{dataList:{type:Array},scrollSpeed:{type:Number,default:.1},amount:{type:Number,default:10},hoverStop:{type:Boolean,default:!0},scrollRate:{type:Number,default:10}},setup(S){const c=S;let u=e.ref(null),t=e.ref(null),n=e.ref([]),i,a=10,s=0,p;e.onMounted(()=>{a=c.amount,console.log(a),i=t.value.getBoundingClientRect().height,u.value.style.transform="translateY(0)",n.value=c.dataList.slice(0,a),e.nextTick(()=>{o=u.value.children[0].getBoundingClientRect().height,console.log(o),p=requestAnimationFrame(g),c.hoverStop&&u.value.addEventListener("wheel",v=>{s+=v.deltaY>0?c.scrollSpeed*c.scrollRate:-c.scrollSpeed*c.scrollRate,s>=i&&(s=i),s<0&&(s=0),u.value.style.transform=`translateY(${-1*s}px)`})})});function l(){p&&(cancelAnimationFrame(p),p=void 0)}function x(){c.hoverStop&&l()}function b(){c.hoverStop&&g()}function B(v){console.log(v)}let o=0;function g(){l(),s+=c.scrollSpeed,s>=o&&(s-=o,n.value.push(c.dataList[a++]),a>=c.dataList.length&&(a=0),o=u.value.children[1].getBoundingClientRect().height,n.value.shift()),u.value.style.transform=`translateY(${-1*s}px)`,p=requestAnimationFrame(g)}return(v,y)=>(e.openBlock(),e.createElementBlock("section",{ref_key:"virtualInfiniteScrollBox",ref:t,class:"virtual-infinite-scroll-box"},[e.createElementVNode("div",{ref_key:"virtualInfiniteScrollList",ref:u,onMouseenter:x,onMouseleave:b,onScroll:B},[e.renderSlot(v.$slots,"default",{slotItem:e.unref(n)})],544)],512))}},A=["id"],F=e.defineComponent({__name:"index",props:{options:{}},emits:["addData","onloaded"],setup(S,{expose:c,emit:u}){const t=S;let n=0,i=e.ref([]),a=e.ref([]),s=e.computed(()=>Math.max(...a.value)),p=e.ref(!0),l={},x,b=0;const B=u;c({changeLoading:o});function o(d){p.value=d}function g(){var m;n=((((m=document.getElementById("gooseWaterFallContainer"))==null?void 0:m.clientWidth)||0)-t.options.gap*(t.options.column-1))/t.options.column,i.value=[];for(let f=0;f<t.options.data.length;f++)i.value.push({x:0,y:0});a.value=new Array(t.options.column).fill(0),t.options.data.forEach(f=>{f.width=n,f.imgWidth||(f.imgWidth=n)})}function v(d,m){let f=[];t.options.data.forEach((r,h)=>{r.imgHeight||f.push(y(r.imgUrl,r.imgWidth).then(w=>{r.imgHeight=Number(w)}))}),Promise.all(f).then(()=>{p.value=!1,e.nextTick(()=>{t.options.data.forEach((r,h)=>{let w=document.getElementById("gooseWaterFallItem"+h);w&&!r.height&&(r.height=w.clientHeight)}),L(d,m)})})}function y(d,m){return new Promise((f,r)=>{let h=new Image;h.src=d,h.onload=function(){let w=m*h.height/h.width;f(w)},h.onerror=function(){r(new Error("Image load error, url:"+d))}})}function L(d,m){let f=t.options.itemBottomGap||0;for(let r=d;r<m;r++){let h=t.options.data[r];if(r<t.options.column)a.value[r]+=h.height+f,i.value[r].y=0,i.value[r].x=(h.width+t.options.gap)*r;else{let w=Math.min(...a.value),k=a.value.indexOf(w);i.value[r].y=w,i.value[r].x=(h.width+t.options.gap)*k,a.value[k]+=h.height+f}}t.options.bottomLoading&&W(),B("onloaded")}function W(){var d;l=new IntersectionObserver(m=>{m[0].isIntersecting&&B("addData")},{root:(d=document.getElementById("gooseWaterFallContainer"))==null?void 0:d.parentElement,rootMargin:(t.options.loadDistance||0)+"px"}),x&&l.observe(x)}return t.options.bottomLoading&&e.watch(()=>t.options.data.length,(d,m)=>{let f=d-m;if(f>0){for(let r=0;r<f;r++)i.value.push({x:0,y:0});for(let r=m;r<d;r++)t.options.data[r].width=n,t.options.data[r].imgWidth||(t.options.data[r].imgWidth=n);v(m,d)}}),e.onMounted(()=>{g(),v(0,t.options.data.length),x=document.getElementById("gooseWaterFallLoadMore");let d=document.getElementById("gooseWaterFallLoading");d&&(b=d.clientHeight)}),e.onBeforeUnmount(()=>{t.options.bottomLoading&&l&&x&&l.unobserve(x)}),(d,m)=>(e.openBlock(),e.createElementBlock("section",{id:"gooseWaterFallContainer",class:"goose-water-fall-container",style:e.normalizeStyle({height:e.unref(s)+(t.options.bottomLoading?e.unref(b):0)+"px"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.options.data,(f,r)=>{var h,w;return e.openBlock(),e.createElementBlock("div",{class:"goose-water-fall-item",id:"gooseWaterFallItem"+r,style:e.normalizeStyle({width:f.width+"px",transform:`translate(${Number((h=e.unref(i)[r])==null?void 0:h.x)}px, ${Number((w=e.unref(i)[r])==null?void 0:w.y)}px)`,opacity:e.unref(p)?0:1})},[e.renderSlot(d.$slots,"default",{item:f})],12,A)}),256)),e.createElementVNode("div",{id:"gooseWaterFallLoadMore",class:"goose-water-fall-load-more",style:e.normalizeStyle({left:"0px",top:`${Math.max(...e.unref(a))}px`})},null,4),e.withDirectives(e.createElementVNode("div",{id:"gooseWaterFallLoading",class:"goose-water-fall-loading",style:e.normalizeStyle({left:"0px",top:`${Math.max(...e.unref(a))}px`})},[e.renderSlot(d.$slots,"loading",{},()=>[m[0]||(m[0]=e.createElementVNode("div",{style:{width:"100%"}},[e.createElementVNode("div",{style:{"text-align":"center"}},"加载中...")],-1))])],4),[[e.vShow,e.unref(p)]])],4))}}),D=E(N),Y=E(_),C=E(M),H=E(F);exports.SeamlessScroll=Y;exports.SignBoard=D;exports.VirtualInfiniteScroll=C;exports.WaterFall=H;
